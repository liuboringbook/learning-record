# 堆

+ 堆是一种特殊的完全二叉树(每层节点完全填满，在最后一层如果不是满的，则只缺少右边的部分节点)
+ 所有的节点都大于等于或小于等于它的子节点

![1596183747664](C:\Users\刘如刚\AppData\Roaming\Typora\typora-user-images\1596183747664.png)

## JS中的堆

+ JS中通常用数组表示堆
+ 左侧子节点的位置是 2*index+1
+ 右侧子节点的位置是 2*index+2
+ 父节点位置是(index-1)/2

![1596183948774](C:\Users\刘如刚\AppData\Roaming\Typora\typora-user-images\1596183948774.png)

## 堆的引用

+ 堆能高效，快速地找到最大值和最小值，时间复杂度为O(1）
+ 找出第K个最大(小)元素

### 第K个最大元素

+ 构建一个最小堆，并将元素一次插入堆中
+ 当堆的容量超过K，就删除堆顶
+ 插入结束后，堆顶就是第K个最大元素

![1596184163140](C:\Users\刘如刚\AppData\Roaming\Typora\typora-user-images\1596184163140.png)

### 实现一个最小堆类

+ 在类里，生命一个数组，用来装元素
+ 主要方法是:插入。删除堆顶，获取堆顶，获取堆大小

#### 插入

+ 将值插入堆的底部，即数组的尾部

+ 然后上移：将这个值和它的父节点进行交换，直到父节点小于等于这个插入值
+ 大小为k的堆中插入元素的时间复杂度为O(logk)

#### 删除堆顶

+ 用数组尾部元素替换堆顶(直接删除堆顶会破坏堆顶结构)

+ 然后下移:将新堆顶和它的子节点进行交换，直到子节点大于等于这个新堆顶
+ 大小为K的堆中删除堆顶的事件复杂度为O(logk)

## 刷题

### 数组中的第K个最大元素

![1596186185027](C:\Users\刘如刚\AppData\Roaming\Typora\typora-user-images\1596186185027.png)

#### 解题思路

+ 看到“第K个最大元素”

+ 考虑选择使用最小堆

#### 解题步骤

+ 构建一个最小堆，并依次把数组的值插入堆中
+ 当堆的容量超过K，就删除堆顶
+ 插入结束后，堆顶就是第K个最大元素

