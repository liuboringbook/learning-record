# VUE源码解析(1)

## 准备工作

### FLOW 

#### 为什么用Flow

JavaScript是动态类型语言，它具有很强的灵活性。但是过于灵活，是容易写出非常隐蔽的隐患代码，在编译器甚至看上去都不会报错。但是在运行阶段就可能出现各种奇怪的bug。

引入Flow做静态类型检查，之所以选择Flow，主要是因为Babel和ESlint都有对应的Flow插件以支持语法，可以完全沿用现有的构建配置，非常小成本的改变就可以拥有静态类型检查的能力

#### Flow的工作方式

通常类型检查分为两种方式：

类型推断：通过变量的使用上下文推断出变量类型，然后根据这些推断来检查类型。

类型注释：事先注释好我们期待的类型，flow会基于这些注释来判断



##### 类型推断

```javascript
/*@flow*/

function split(Str){
    return str.split(' ')
}
split(11)
```



FLow检查上述代码后悔报错，因为函数split期待的是字符串，而我们输入的是数字

##### 类型注释

```javas
/*@flow*/
function add(x,y){
   return x+y
}
add('Hello',11)
```

Flow检查上述代码检查不出任何错误，因为从语法层次考虑，+即可以用在字符串上，也可以用在数字上，并没有明确指出add()的参数必须为数字。

在这种情况下，我们可以借助类型注释来命名期望的类型

```javascript
/*@flow*/   //出现这个flow注释标志才会进行检测，否则将会跳过检测
function add(x:number,y:number):number{
   return x+y
}
add('hello',11) //报错
```

现在Flow就能检查出错误，因为函数的期望类型是数字，而我们提供了字符串



